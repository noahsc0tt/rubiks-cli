#!/usr/bin/env ruby
require 'optparse'
require 'rubiks_cli'

options = {}
OptionParser.new do |opts|
  opts.banner = "Usage: mytool [options]"

  opts.on("-s", "--scramble", "Generate scramble") do
    options[:scramble] = true
  end

  opts.on("-t", "--time", "Start timer") do
    options[:time] = true
  end

  opts.on("-o", "--solve", "Start solve") do
    options[:solve] = true
  end

  opts.on("-k", "--keep", "Keep output on screen") do
    options[:keep] = true
  end
end.parse!

if !options[:keep]
  RubiksCli::Clear.screen
end

if options[:scramble]
  puts RubiksCli::Scrambler.get_scramble
elsif options[:time]
  RubiksCli::Timer.start
elsif options[:solve]
  RubiksCli::Solve.solve
else
  RubiksCli::Solve.loop(clear_screen: !options[:keep])
end
